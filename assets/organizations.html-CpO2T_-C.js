import{_ as s,c as r,b as n,a as t,e,d as o,w as l,r as d,o as g}from"./app-DJ7KBX28.js";const u={};function p(c,a){const i=d("RouteLink");return g(),r("div",null,[a[9]||(a[9]=n("h1",{id:"organizations",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#organizations"},[n("span",null,"Organizations")])],-1)),a[10]||(a[10]=n("p",null,"Organizations in Melody Auth provide:",-1)),n("ul",null,[a[4]||(a[4]=n("li",null,[n("strong",null,"User Management"),e(": Organize users into separate organizational contexts")],-1)),a[5]||(a[5]=n("li",null,[n("strong",null,"Registration Control"),e(": Organizations can enable or disable public user registration")],-1)),a[6]||(a[6]=n("li",null,[n("strong",null,"User Association"),e(": Users can be members of multiple organizations")],-1)),a[7]||(a[7]=n("li",null,[n("strong",null,"Active Organization"),e(": Users can only be in one active organization at a time")],-1)),n("li",null,[a[1]||(a[1]=n("strong",null,"Custom Branding",-1)),a[2]||(a[2]=e(": Each organization can show different visual identity to users",-1)),a[3]||(a[3]=n("br",null,null,-1)),o(i,{to:"/branding.html#per-organization-branding"},{default:l(()=>a[0]||(a[0]=[e("Per-Organization Branding",-1)])),_:1,__:[0]})]),a[8]||(a[8]=n("li",null,[n("strong",null,"Flexible Configuration"),e(": Control whether users join organizations or just see custom branding")],-1))]),a[11]||(a[11]=t(`<h2 id="enabling-organizations" tabindex="-1"><a class="header-anchor" href="#enabling-organizations"><span>Enabling Organizations</span></a></h2><p>To enable organization features in your Melody Auth instance, set <code>ENABLE_ORG = true</code> in <code>server/wrangler.toml</code> under <code>[vars]</code>.</p><h2 id="branding-inheritance" tabindex="-1"><a class="header-anchor" href="#branding-inheritance"><span>Branding Inheritance</span></a></h2><p>The branding system follows a hierarchy:</p><ol><li><strong>Organization-specific settings</strong> (highest priority)</li><li><strong>Global default settings</strong> (fallback)</li></ol><p>If an organization doesn&#39;t specify a particular branding element, it inherits the global default.</p><h2 id="admin-panel-management" tabindex="-1"><a class="header-anchor" href="#admin-panel-management"><span>Admin Panel Management</span></a></h2><h3 id="creating-an-organization" tabindex="-1"><a class="header-anchor" href="#creating-an-organization"><span>Creating an Organization</span></a></h3><ol><li>Open the Admin Panel and click &quot;Orgs&quot; in the navigation</li><li>Click &quot;Create an org&quot; button</li><li>Fill in the required fields: <ul><li><strong>Name</strong>: Display name (e.g., &quot;Acme Corporation&quot;)</li><li><strong>Slug</strong>: Unique identifier for URLs (e.g., &quot;acme-corp&quot;)</li><li><strong>Allow Public Registration</strong>: Enable/disable public user signup</li><li><strong>Only Use for Branding Override</strong>: Users see custom branding but don&#39;t become members</li></ul></li><li>Click &quot;Save&quot; to create the organization</li></ol><h3 id="managing-organization-users" tabindex="-1"><a class="header-anchor" href="#managing-organization-users"><span>Managing Organization Users</span></a></h3><ul><li>View all users in an organization from the organization details page</li><li>Users appear in the list if they have the organization&#39;s slug in their user record</li><li>Add users manually if public registration is disabled</li></ul><h3 id="organization-settings" tabindex="-1"><a class="header-anchor" href="#organization-settings"><span>Organization Settings</span></a></h3><ul><li>Edit organization name, slug, and registration policies</li><li>Configure custom branding (logos, colors, fonts)</li><li>Update legal links (terms of service, privacy policy)</li></ul><h2 id="api-integration" tabindex="-1"><a class="header-anchor" href="#api-integration"><span>API Integration</span></a></h2><p>Organizations can be managed programmatically through the S2S API.</p><h3 id="organization-management-endpoints" tabindex="-1"><a class="header-anchor" href="#organization-management-endpoints"><span>Organization Management Endpoints</span></a></h3><div class="language-http line-numbers-mode" data-highlighter="prismjs" data-ext="http"><pre><code class="language-http"><span class="line">GET /api/v1/orgs: Get all organizations</span>
<span class="line">GET /api/v1/orgs/{id}: Get specific organization details</span>
<span class="line">POST /api/v1/orgs: Create new organization</span>
<span class="line">PUT /api/v1/orgs/{id}: Update organization settings</span>
<span class="line">DELETE /api/v1/orgs/{id}: Delete organization</span>
<span class="line">GET /api/v1/orgs/{id}/users: Get all users in an organization</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="user-orgs-management-endpoints" tabindex="-1"><a class="header-anchor" href="#user-orgs-management-endpoints"><span>User Orgs Management Endpoints</span></a></h3><div class="language-http line-numbers-mode" data-highlighter="prismjs" data-ext="http"><pre><code class="language-http"><span class="line">GET /api/v1/users/{authId}/orgs: Get all organizations for a user</span>
<span class="line">POST /api/v1/users/{authId}/orgs: Update user&#39;s organizations</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="set-user-s-active-organization" tabindex="-1"><a class="header-anchor" href="#set-user-s-active-organization"><span>Set user&#39;s active organization</span></a></h3><div class="language-http line-numbers-mode" data-highlighter="prismjs" data-ext="http"><pre><code class="language-http"><span class="line">PUT /api/v1/users/{authId}: set orgSlug to the org slug of an organization that the user already belongs to</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="registration-flow-scenarios" tabindex="-1"><a class="header-anchor" href="#registration-flow-scenarios"><span>Registration Flow scenarios</span></a></h2><h3 id="scenario-1-open-organization-with-user-membership" tabindex="-1"><a class="header-anchor" href="#scenario-1-open-organization-with-user-membership"><span>Scenario 1: Open Organization with User Membership</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">allowPublicRegistration: true</span>
<span class="line">onlyUseForBrandingOverride: false</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Result</strong>: Users can sign up and automatically become organization members. They appear in the organization&#39;s user list and are managed within the organization. The org becomes the user&#39;s active organization.</p><h3 id="scenario-2-branding-only-no-user-membership" tabindex="-1"><a class="header-anchor" href="#scenario-2-branding-only-no-user-membership"><span>Scenario 2: Branding-Only (No User Membership)</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">allowPublicRegistration: true</span>
<span class="line">onlyUseForBrandingOverride: true</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Result</strong>: Users see organization branding during signup but do not become organization members. They remain as global users.</p><h3 id="scenario-3-closed-organization" tabindex="-1"><a class="header-anchor" href="#scenario-3-closed-organization"><span>Scenario 3: Closed Organization</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">allowPublicRegistration: false</span>
<span class="line">onlyUseForBrandingOverride: false/true (doesn&#39;t matter)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Result</strong>: No public registration allowed. Organization administrators must manually add users to the organization.</p>`,31))])}const m=s(u,[["render",p]]),b=JSON.parse('{"path":"/organizations.html","title":"Organizations","lang":"en-US","frontmatter":{},"git":{"updatedTime":1761178376000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":2,"url":"https://github.com/Baozier"}],"changelog":[{"hash":"668b4b7a3a3a0ce277df29ec239529e92018abe8","time":1761178376000,"email":"byn9826@gmail.com","author":"Baozier","message":"Support set user to multi orgs in admin panel (#441)"},{"hash":"5396c9586a61f59593ebaea2b6848496a7027f19","time":1755304846000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add docs for main features (#428)"}]},"filePathRelative":"organizations.md"}');export{m as comp,b as data};
